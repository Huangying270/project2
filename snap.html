<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            position: absolute;
        }
    </style>
</head>

<body>
    <video id="player" controls autoplay></video><br><br>
    <button id="capture" style="width:100px;height:50px">Take Picture</button>&nbsp;
    <a href="#" id="downloader" download="image.png">Download</a><br>
    <canvas id="snapshot" width=640 height=480></canvas><br>

    <script>
        var player = document.getElementById('player');
        var snapshotCanvas = document.getElementById('snapshot');
        var captureButton = document.getElementById('capture');
        var download = document.getElementById('downloader');
        var videoTracks;
        var handleSuccess = function (stream) {
            player.srcObject = stream;
            videoTracks = stream.getVideoTracks();
        };
        download.addEventListener('click', function () {
            document.getElementById("downloader").download = "project2.png";
            document.getElementById("downloader").href = document.getElementById("snapshot").toDataURL("image/png").replace(/^data:image\/[^;]/, 'data:application/octet-stream');
        });
        captureButton.addEventListener('click', function () {
            var context = snapshot.getContext('2d');
            context.drawImage(player, 0, 0, snapshotCanvas.width, snapshotCanvas.height);
        });
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(handleSuccess);
    </script>
</body>

</html>